<script>
    if (typeof window.IS_SPA_FRAMEWORK_LOADED === 'undefined') {
        console.warn('GUARDI√ÉO: Acesso direto ao CAIXA bloqueado! Redirecionando...');
        window.location.replace(`index.html?view=caixa`);
    }
</script>

<div class="flex flex-wrap justify-between items-center gap-4 mb-2">
    <h2 class="text-4xl font-bold">Dashboard Operacional</h2>
    <div id="controle-loja-container" class="bg-card p-2 rounded-lg flex items-center gap-3">
        <span class="font-semibold text-lg">Status da Loja:</span>
        <div class="flex items-center">
            <span id="status-loja-texto" class="mr-3 text-sm font-bold w-20 text-center">...</span>
            <label for="toggle-loja-aberta" class="flex items-center cursor-pointer">
                <div class="relative">
                    <input type="checkbox" id="toggle-loja-aberta" class="sr-only peer">
                    <div class="w-14 h-8 bg-borda rounded-full peer-checked:bg-green-500 transition-colors">
                    </div>
                    <div
                        class="dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform peer-checked:translate-x-full">
                    </div>
                </div>
            </label>
        </div>
    </div>
</div>
<p class="text-texto-muted mb-8">Vis√£o geral do seu movimento em tempo real.</p>

<!-- ‚ûï NOVO CONTAINER AQUI üëá -->
<div id="info-usuario-logado" class="text-right text-texto-muted text-sm -mt-6 mb-8">
    <!-- O JS vai preencher aqui -->
</div>


<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <div class="lg:col-span-2 space-y-8">
        <div class="bg-card p-6 rounded-lg">
            <h3 class="text-2xl font-bold mb-4 text-principal">Mapa de Mesas</h3>
            <div id="dashboard-mapa-mesas" class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-4">
                <p class="col-span-full text-center text-texto-muted animate-pulse">Carregando status
                    das mesas...</p>
            </div>
        </div>
        <div class="bg-card p-6 rounded-lg">
            <h3 class="text-2xl font-bold mb-4 text-principal">Feed de Pedidos (Delivery/Balc√£o)</h3>
            <div id="dashboard-feed-pedidos" class="space-y-4 max-h-96 overflow-y-auto no-scrollbar pr-2">
                <p class="text-center text-texto-muted animate-pulse">Buscando √∫ltimos pedidos...</p>
            </div>
        </div>
    </div>

    <div class="lg:col-span-1 space-y-8">
        <div class="bg-card p-6 rounded-lg space-y-4">
            <h3 class="text-2xl font-bold text-principal">Resumo de Hoje</h3>
            <div class="flex items-center space-x-4">
                <div class="bg-principal/20 p-3 rounded-full"><i
                        class="bi bi-journal-check text-principal text-2xl"></i></div>
                <div>
                    <p class="text-texto-muted">Total de Pedidos</p>
                    <p id="dashboard-total-pedidos" class="text-2xl font-bold">...</p>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <div class="bg-green-500/20 p-3 rounded-full"><i class="bi bi-cash-coin text-green-400 text-2xl"></i>
                </div>
                <div>
                    <p class="text-texto-muted">Faturamento</p>
                    <p id="dashboard-faturamento-dia" class="text-2xl font-bold">...</p>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <div class="bg-blue-500/20 p-3 rounded-full"><i class="bi bi-graph-up-arrow text-blue-400 text-2xl"></i>
                </div>
                <div>
                    <p class="text-texto-muted">Ticket M√©dio</p>
                    <p id="dashboard-ticket-medio" class="text-2xl font-bold">...</p>
                </div>
            </div>
        </div>
        <div class="bg-card p-6 rounded-lg">
            <h3 class="text-2xl font-bold mb-4 text-principal">Atalhos R√°pidos ‚ö°</h3>
            <div class="swiper swiper-atalhos">
                <div class="swiper-wrapper">
                    <!-- ‚úÖ ID ADICIONADO AQUI üëá -->
                    <div id="atalho-gerenciamento" class="swiper-slide !w-auto">
                        <a href="gerenciamento.html" target="_blank"
                            class="block w-56 text-left p-4 rounded-lg bg-sidebar hover:bg-fundo transition-colors h-full flex flex-col">
                            <h4 class="font-bold text-principal"><i
                                    class="bi bi-gear-wide-connected mr-2"></i>Gerenciamento</h4>
                            <p class="text-xs text-texto-muted mt-1 flex-grow">Finan√ßas, equipe e notas
                                fiscais.</p>
                        </a>
                    </div>
                    <div class="swiper-slide !w-auto">
                        <a href="agente-ia.html" target="_blank"
                            class="block w-56 text-left p-4 rounded-lg bg-sidebar hover:bg-fundo transition-colors h-full flex flex-col">
                            <h4 class="font-bold text-principal"><i class="bi bi-magic mr-2"></i>Criador
                                M√°gico IA</h4>
                            <p class="text-xs text-texto-muted mt-1 flex-grow">Suporte e ideias de
                                marketing.</p>
                        </a>
                    </div>
                    <div class="swiper-slide !w-auto">
                        <a href="garcom-login.html" target="_blank"
                            class="block w-56 text-left p-4 rounded-lg bg-sidebar hover:bg-fundo transition-colors h-full flex flex-col">
                            <h4 class="font-bold text-principal"><i class="bi bi-person-badge-fill mr-2"></i>Acesso
                                Gar√ßom</h4>
                            <p class="text-xs text-texto-muted mt-1 flex-grow">Link para a tela de login
                                da equipe.</p>
                        </a>
                    </div>
                    <div class="swiper-slide !w-auto">
                        <a href="cardapio-mesa.html" target="_blank"
                            class="block w-56 text-left p-4 rounded-lg bg-sidebar hover:bg-fundo transition-colors h-full flex flex-col">
                            <h4 class="font-bold text-principal"><i class="bi bi-book-fill mr-2"></i>Card√°pio de Mesa
                            </h4>
                            <p class="text-xs text-texto-muted mt-1 flex-grow">Visualize o card√°pio do
                                cliente.</p>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>